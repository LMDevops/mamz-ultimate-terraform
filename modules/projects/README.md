# Simple Project Factory
A project factory module that does just the basics

## Supported Version
The module is written with Terraform 0.15.x support. While it's been tested only
on Terraform 0.15.x, it should work with Terraform >= 0.12.x.

## When to Use
This module should be used when a simple project factory is needed. Google has
a [project factory](https://github.com/terraform-google-modules/terraform-google-project-factory)
that has more features but is also more complicated.

Use Google's project factory if you want (this is not an exhaustive list):
* to disable, delete, or deprivilege all default service accounts for all APIs
* to attach subnets from a shared VPC to the project
* to automatically create a service account in the project
* to use some other feature in the project factory

Google's module is featureful. A byproduct of this is that it can be difficult 
for people new to the module to understand subtleties in the plans and to
understand everything the module does. For example if you're not aware a service
account will be created by default, you could end up with 150 extra service
accounts after creating 150 projects without realizing it until someone does an
audit (this actually happened).

Use this simple project factory module if:
* you want a simple module that is easily understood
* you want a module that produces a simple plan
* all you need is to create a project and enable APIs.

**NOTE**: You can extend the simple project factory to incorporate some of the
features of the Google Project Factory module if you need to for your use case.

## Usage
Simple usage is
```hcl
module "project" {
  source        = "<update with repo source>"
  name          = "foo"
  random_suffix = true
  folder_id     = 1234567890123
  services = [
    "compute.googleapis.com",
    "container.googleapis.com",
  ]
}
```

**Note**: If moving from a top level project (using `var.org_id`) to a folder,
then Terraform will complain about both `var.org_id` and `var.folder_id` are
set. The only known work around is to destroy the project and recreate it under
the folder. Moving a project to a new folder works as expected.
<!-- BEGIN_TF_DOCS -->
## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| auto\_create\_network | Whether to keep the default network. Note that the default network will exist momentarily, so there must be room in the quota for at least one network. | `bool` | `false` | no |
| billing\_account | The billing account ID for the project | `string` | n/a | yes |
| disable\_dependent\_services | Whether to disable services that are dependent when a service is destroyed | `bool` | `false` | no |
| folder\_id | The folder id to create the project under. Only one of `var.org_id` or `var.folder_id` may be set. At least one of them must be set. If both are set, an error will occur. | `number` | `null` | no |
| labels | A key/value pair for labels to assign to the project | `map(string)` | `{}` | no |
| name | The name of the project | `string` | n/a | yes |
| org\_id | The numeric org id to create the project under. If set, the project will be created at the top level of the organization. Only one of `var.org_id` or `var.folder_id` can be set.  At least one must be set. If both are set, an error will occur. | `number` | `null` | no |
| project\_id | The project id for the project. Only use if `var.random_suffix = false` | `string` | `null` | no |
| random\_suffix | Whether to use a random 4 character suffix. Only use if `var.project_id = null`. | `bool` | `true` | no |
| services | A list of APIs (services) to enable | `list(string)` | <pre>[<br>  "compute.googleapis.com"<br>]</pre> | no |

## Outputs

| Name | Description |
|------|-------------|
| project\_id | The id for project with the format `projects/{{project}}` |
| project\_number | The numeric identifier for the project. |
<!-- END_TF_DOCS -->


## Autogenerated documentation
To autogenerate the Terraform documentation for the inputs and outputs, use
[terraform-docs](https://github.com/terraform-docs/terraform-docs). After
installation, the command to generate the documentation is:
```
terraform-docs markdown table .
```
The configuration file is `.terraform-docs.yml`. The minimum version of
terraform-docs needed is 0.12.0.
